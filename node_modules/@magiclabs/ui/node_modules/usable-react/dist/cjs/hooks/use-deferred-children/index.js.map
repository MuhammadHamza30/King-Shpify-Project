{"version":3,"file":"index.js","sources":["../../../../src/hooks/use-deferred-children/index.ts"],"sourcesContent":["import React, { ReactElement, useEffect, useState } from 'react';\nimport { useInitialRender } from '../use-initial-render';\n\n/**\n * Checks if old children and new children are different based on React keys.\n *\n * @source https://github.com/reactjs/react-transition-group/blob/master/src/SwitchTransition.js#L6\n */\nfunction areReactChildrenDifferent(\n  oldChildren: ReactElement | ReactElement[],\n  newChildren: ReactElement | ReactElement[],\n) {\n  if (oldChildren === newChildren) return false;\n\n  if (\n    React.isValidElement(oldChildren) &&\n    React.isValidElement(newChildren) &&\n    oldChildren.key != null &&\n    oldChildren.key === newChildren.key\n  ) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Get a copy of the given `children`, deferred to the next update.\n */\nexport function useDeferredChildren(children: ReactElement | ReactElement[]) {\n  const [nextChildren, setNextChildren] = useState(children);\n  const isInitialRender = useInitialRender();\n\n  useEffect(() => {\n    if (!isInitialRender && areReactChildrenDifferent(nextChildren, children)) {\n      setNextChildren(children);\n    }\n  }, [nextChildren, children]);\n\n  return nextChildren;\n}\n"],"names":["React","__read","useState","useInitialRender","useEffect"],"mappings":";;;;;;;;;;;;AAGA;;;;;AAKA,SAAS,yBAAyB,CAChC,WAA0C,EAC1C,WAA0C;IAE1C,IAAI,WAAW,KAAK,WAAW;QAAE,OAAO,KAAK,CAAC;IAE9C,IACEA,yBAAK,CAAC,cAAc,CAAC,WAAW,CAAC;QACjCA,yBAAK,CAAC,cAAc,CAAC,WAAW,CAAC;QACjC,WAAW,CAAC,GAAG,IAAI,IAAI;QACvB,WAAW,CAAC,GAAG,KAAK,WAAW,CAAC,GAAG,EACnC;QACA,OAAO,KAAK,CAAC;KACd;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAED;;;SAGgB,mBAAmB,CAAC,QAAuC;IACnE,IAAA,KAAAC,cAAkCC,cAAQ,CAAC,QAAQ,CAAC,IAAA,EAAnD,YAAY,QAAA,EAAE,eAAe,QAAsB,CAAC;IAC3D,IAAM,eAAe,GAAGC,sBAAgB,EAAE,CAAC;IAE3CC,eAAS,CAAC;QACR,IAAI,CAAC,eAAe,IAAI,yBAAyB,CAAC,YAAY,EAAE,QAAQ,CAAC,EAAE;YACzE,eAAe,CAAC,QAAQ,CAAC,CAAC;SAC3B;KACF,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,CAAC;IAE7B,OAAO,YAAY,CAAC;AACtB;;;;"}