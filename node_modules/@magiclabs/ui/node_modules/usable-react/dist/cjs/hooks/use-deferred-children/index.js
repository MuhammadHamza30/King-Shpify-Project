'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _tslib = require('../../_virtual/_tslib.js');
var React = require('react');
var index = require('../use-initial-render/index.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);

/**
 * Checks if old children and new children are different based on React keys.
 *
 * @source https://github.com/reactjs/react-transition-group/blob/master/src/SwitchTransition.js#L6
 */
function areReactChildrenDifferent(oldChildren, newChildren) {
    if (oldChildren === newChildren)
        return false;
    if (React__default['default'].isValidElement(oldChildren) &&
        React__default['default'].isValidElement(newChildren) &&
        oldChildren.key != null &&
        oldChildren.key === newChildren.key) {
        return false;
    }
    return true;
}
/**
 * Get a copy of the given `children`, deferred to the next update.
 */
function useDeferredChildren(children) {
    var _a = _tslib.__read(React.useState(children), 2), nextChildren = _a[0], setNextChildren = _a[1];
    var isInitialRender = index.useInitialRender();
    React.useEffect(function () {
        if (!isInitialRender && areReactChildrenDifferent(nextChildren, children)) {
            setNextChildren(children);
        }
    }, [nextChildren, children]);
    return nextChildren;
}

exports.useDeferredChildren = useDeferredChildren;
//# sourceMappingURL=index.js.map
