'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _tslib = require('../../_virtual/_tslib.js');
var React = require('react');
var index$1 = require('../use-effect-trigger/index.js');
var index = require('../use-initial-render/index.js');

/**
 * Executes the given effect on an interval.
 */
function useInterval(effect, deps, interval) {
    if (interval === void 0) { interval = 1000; }
    var savedCallback = React.useRef(effect);
    var isInitialRender = index.useInitialRender();
    var isCleared = React.useRef(false);
    // Remember the latest callback.
    React.useEffect(function () {
        savedCallback.current = effect;
    }, [effect]);
    // Set up the interval.
    var triggerInterval = index$1.useEffectTrigger(function () {
        if (!isInitialRender && !isCleared.current)
            return savedCallback.current();
        return undefined;
    }, _tslib.__spread(deps));
    React.useEffect(function () {
        var id = setTimeout(function () {
            triggerInterval();
        }, interval);
        return function () { return clearTimeout(id); };
    }, [triggerInterval, interval]);
    var clear = React.useCallback(function () {
        isCleared.current = true;
    }, []);
    return clear;
}

exports.useInterval = useInterval;
//# sourceMappingURL=index.js.map
