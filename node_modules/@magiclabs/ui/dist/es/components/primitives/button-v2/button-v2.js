import { __rest } from '../../../_virtual/_tslib.js';
import React, { useMemo } from 'react';
import { useFocusRing, useHover, usePress } from 'react-aria';
import { AnimatePresence, motion } from 'framer-motion';
import { mergeProps } from '../../../libs/merge-props.js';
import clsx from 'clsx';
import { Icon, IconColorProvider } from '../../icons/icon-base.js';
import '@seznam/compose-react-refs';
import { transitions } from '../../../hooks/transitions.js';
import '@react-aria/ssr';
import { InverseThemeSemantics } from '../../theme-provider/inverse-theme-semantics.js';
import '@artsy/fresnel';
import '../../theme-provider/theme-provider.js';
import '../../theme-provider/theme-head.js';
import { useTheme } from '../../theme-provider/use-theme.js';
import 'usable-react';
import 'watch-resize';
import 'react-dom';
import 'react-popper';
import { Spacer } from '../../layout/spacer.js';
import { createGenericForwardRefsFactory } from '../../../libs/generic-forward-refs.js';
import modules_f40ee6d2 from './button-v2.less.js';

/**
 * Determines a _default_ color for icons nested in a `<ButtonV2>`.
 */
function useIconColor(baseColor, inverseSemantics, isHovered, isPressed) {
    const theme = useTheme({ inverseSemantics });
    return useMemo(() => {
        let iconBaseColor;
        switch (baseColor) {
            case 'v2secondary':
            case 'v2tertiary':
                iconBaseColor = 'primary';
                break;
            case 'neutral':
                iconBaseColor = 'dark';
                break;
            case 'primary':
            case 'negative':
                iconBaseColor = 'light';
                break;
            default:
                iconBaseColor = undefined;
        }
        return iconBaseColor ? theme.hex[iconBaseColor].base : undefined;
    }, [theme.key, baseColor]);
}
const createButtonV2Components = /* @__PURE__ */ createGenericForwardRefsFactory(['button', 'a']);
const ButtonV2Components = /* @__PURE__ */ createButtonV2Components('ButtonV2', { color: 'primary', size: 'md' }, (props, externalRef) => {
    const { onPress, className, disabled, validating, size, color, leadingIcon, trailingIcon, children, component } = props, otherProps = __rest(props, ["onPress", "className", "disabled", "validating", "size", "color", "leadingIcon", "trailingIcon", "children", "component"]);
    const { isFocusVisible, focusProps } = useFocusRing();
    const { isHovered, hoverProps } = useHover({ isDisabled: disabled });
    const { isPressed, pressProps } = usePress({ onPress, isDisabled: disabled });
    const getScaleProps = transitions.useScaleIn();
    const inverseSemantics = false;
    const iconColor = useIconColor(color, inverseSemantics);
    const content = (React.createElement(React.Fragment, null,
        React.createElement(AnimatePresence, null, isFocusVisible && React.createElement(motion.span, Object.assign({ "aria-hidden": "true", className: modules_f40ee6d2.focusRing }, getScaleProps(1.08)))),
        leadingIcon && (React.createElement(React.Fragment, null,
            React.createElement(Icon, { size: size === 'sm' ? 16 : 24, type: leadingIcon }),
            React.createElement(Spacer, { size: 8 }))),
        React.createElement("span", { className: modules_f40ee6d2.buttonLabel }, children),
        trailingIcon && (React.createElement(React.Fragment, null,
            React.createElement(Spacer, { size: 8 }),
            React.createElement(Icon, { size: size === 'sm' ? 16 : 24, type: trailingIcon })))));
    return (React.createElement(IconColorProvider, { colorA: iconColor },
        React.createElement(InverseThemeSemantics, { active: inverseSemantics }, React.createElement(component, Object.assign(Object.assign({ className: clsx([
                className,
                modules_f40ee6d2.Button,
                modules_f40ee6d2[size],
                modules_f40ee6d2[`size_${size}`],
                modules_f40ee6d2[`color_${color}`],
                disabled && modules_f40ee6d2.disabled,
                validating && modules_f40ee6d2.validating,
                isPressed && modules_f40ee6d2.active,
            ]), disabled, 'aria-disabled': disabled }, mergeProps(pressProps, focusProps, hoverProps, otherProps)), { ref: externalRef }), content))));
});
const ButtonV2 = /* @__PURE__ */ Object.assign(ButtonV2Components.button, ButtonV2Components);

export { ButtonV2 };
//# sourceMappingURL=button-v2.js.map
