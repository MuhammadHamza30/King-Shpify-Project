{"version":3,"file":"copyable-text-field.js","sources":["../../../../../src/components/primitives/text-field/copyable-text-field.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport composeRefs from '@seznam/compose-react-refs';\nimport { useClipboard } from 'usable-react';\nimport { usePress } from 'react-aria';\nimport { TextField } from './text-field';\nimport { Icon, MonochromeIcons } from '../../icons';\nimport { HoverActivatedTooltip } from '../../feedback';\nimport { forwardRefWrapper } from '../../../libs/forward-ref-wrapper';\nimport { TextButton } from '../text-button/text-button';\nimport { mergeProps } from '../../../libs/merge-props';\nimport { AutoResizingDiv } from '../../layout';\n\ninterface CopyableTextFieldProps extends React.ComponentProps<typeof TextField> {\n  onCopy?: () => void;\n}\n\nexport const CopyableTextField = /* @__PURE__ */ forwardRefWrapper<HTMLInputElement, CopyableTextFieldProps>(\n  'CopyableTextField',\n\n  (props, externalRef) => {\n    const inputRef = useRef<HTMLInputElement | null>(null);\n    const [copyTooltipText, setCopyTooltipText] = useState('Copy');\n\n    const { value, defaultValue, onCopy, size, ...otherProps } = props;\n\n    useEffect(() => {\n      if (copyTooltipText !== 'Copy') {\n        const timeout = setTimeout(() => setCopyTooltipText('Copy'), 1000);\n        return () => clearTimeout(timeout);\n      }\n\n      return undefined;\n    }, [copyTooltipText]);\n\n    const { copy, ref: clipboardRef } = useClipboard(() => {\n      setCopyTooltipText('Copied!');\n      if (onCopy) onCopy();\n    });\n\n    const { pressProps } = usePress({ onPress: copy });\n\n    const suffix = (\n      <HoverActivatedTooltip portalize placement=\"top\">\n        <HoverActivatedTooltip.Anchor>\n          <TextButton size={size === 'lg' ? 'md' : size} {...mergeProps(pressProps)}>\n            <Icon type={MonochromeIcons.Copy} style={{ lineHeight: 0 }} />\n          </TextButton>\n        </HoverActivatedTooltip.Anchor>\n\n        <HoverActivatedTooltip.Content>\n          <AutoResizingDiv>\n            <p style={{ textAlign: 'center' }}>{copyTooltipText}</p>\n          </AutoResizingDiv>\n        </HoverActivatedTooltip.Content>\n      </HoverActivatedTooltip>\n    );\n\n    return (\n      <TextField\n        value={value}\n        defaultValue={defaultValue}\n        suffix={suffix}\n        size={size}\n        {...otherProps}\n        ref={composeRefs(inputRef, externalRef, clipboardRef)}\n      />\n    );\n  },\n);\n"],"names":["MonochromeIcons.Copy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBO,MAAM,iBAAiB,mBAAmB,iBAAiB,CAChE,mBAAmB,EAEnB,CAAC,KAAK,EAAE,WAAW,KAAI;AACrB,IAAA,MAAM,QAAQ,GAAG,MAAM,CAA0B,IAAI,CAAC,CAAC;IACvD,MAAM,CAAC,eAAe,EAAE,kBAAkB,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;AAE/D,IAAA,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI,EAAoB,GAAA,KAAK,EAApB,UAAU,GAAA,MAAA,CAAK,KAAK,EAA5D,CAAA,OAAA,EAAA,cAAA,EAAA,QAAA,EAAA,MAAA,CAAoD,CAAQ,CAAC;IAEnE,SAAS,CAAC,MAAK;QACb,IAAI,eAAe,KAAK,MAAM,EAAE;AAC9B,YAAA,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM,kBAAkB,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;AACnE,YAAA,OAAO,MAAM,YAAY,CAAC,OAAO,CAAC,CAAC;AACpC,SAAA;AAED,QAAA,OAAO,SAAS,CAAC;AACnB,KAAC,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC;IAEtB,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,YAAY,EAAE,GAAG,YAAY,CAAC,MAAK;QACpD,kBAAkB,CAAC,SAAS,CAAC,CAAC;AAC9B,QAAA,IAAI,MAAM;AAAE,YAAA,MAAM,EAAE,CAAC;AACvB,KAAC,CAAC,CAAC;AAEH,IAAA,MAAM,EAAE,UAAU,EAAE,GAAG,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IAEnD,MAAM,MAAM,IACV,KAAC,CAAA,aAAA,CAAA,qBAAqB,IAAC,SAAS,EAAA,IAAA,EAAC,SAAS,EAAC,KAAK,EAAA;QAC9C,KAAC,CAAA,aAAA,CAAA,qBAAqB,CAAC,MAAM,EAAA,IAAA;AAC3B,YAAA,KAAA,CAAA,aAAA,CAAC,UAAU,EAAC,MAAA,CAAA,MAAA,CAAA,EAAA,IAAI,EAAE,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,IAAI,IAAM,UAAU,CAAC,UAAU,CAAC,CAAA;AACvE,gBAAA,KAAA,CAAA,aAAA,CAAC,IAAI,EAAC,EAAA,IAAI,EAAEA,IAAoB,EAAE,KAAK,EAAE,EAAE,UAAU,EAAE,CAAC,EAAE,EAAA,CAAI,CACnD,CACgB;QAE/B,KAAC,CAAA,aAAA,CAAA,qBAAqB,CAAC,OAAO,EAAA,IAAA;AAC5B,YAAA,KAAA,CAAA,aAAA,CAAC,eAAe,EAAA,IAAA;AACd,gBAAA,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,EAAG,KAAK,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,EAAG,EAAA,eAAe,CAAK,CACxC,CACY,CACV,CACzB,CAAC;AAEF,IAAA,QACE,KAAA,CAAA,aAAA,CAAC,SAAS,EAAA,MAAA,CAAA,MAAA,CAAA,EACR,KAAK,EAAE,KAAK,EACZ,YAAY,EAAE,YAAY,EAC1B,MAAM,EAAE,MAAM,EACd,IAAI,EAAE,IAAI,EACN,EAAA,UAAU,EACd,EAAA,GAAG,EAAE,WAAW,CAAC,QAAQ,EAAE,WAAW,EAAE,YAAY,CAAC,EAAA,CAAA,CACrD,EACF;AACJ,CAAC;;;;"}