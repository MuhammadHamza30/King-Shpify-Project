{"version":3,"file":"radio.js","sources":["../../../../../src/components/primitives/radio/radio.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/label-has-associated-control */\n\nimport { PressEvent } from '@react-types/shared';\nimport composeRefs from '@seznam/compose-react-refs';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport React, { PropsWithChildren, createContext, useContext, useRef } from 'react';\nimport { useFocusRing, useHover, usePress } from 'react-aria';\nimport { transitions } from '../../../hooks/transitions';\nimport { clsx } from '../../../libs/clsx';\nimport { forwardRefWrapper } from '../../../libs/forward-ref-wrapper';\nimport { mergeProps } from '../../../libs/merge-props';\nimport { IntrinsicElementProps } from '../../../types/utility';\nimport { Spacer } from '../../layout';\n\nimport styles from './radio.less';\n\nconst RadioGroupContext = /* @__PURE__ */ createContext<any>({});\n\ninterface RadioGroupProps extends PropsWithChildren {\n  name: string;\n  selectedValue?: string | number | boolean;\n  onChange?: React.EventHandler<React.ChangeEvent<HTMLInputElement>>;\n}\n\nexport const RadioGroup: React.FC<RadioGroupProps> = (props) => {\n  const { name = '', selectedValue, onChange = () => {}, children } = props;\n\n  return <RadioGroupContext.Provider value={{ name, selectedValue, onChange }}>{children}</RadioGroupContext.Provider>;\n};\n\nRadioGroup.displayName = 'RadioGroup';\n\ninterface RadioProps extends IntrinsicElementProps<'input'> {\n  label?: string;\n  color?: 'primary' | 'success' | 'warning' | 'error';\n  onPress?: (event: PressEvent) => void;\n}\n\nexport const Radio = /* @__PURE__ */ forwardRefWrapper<HTMLInputElement, RadioProps>(\n  'Radio',\n\n  { color: 'primary' },\n\n  (props, externalRef) => {\n    const { onPress, disabled, checked, label, color, value, ...otherProps } = props;\n\n    const inputRef = useRef<HTMLInputElement | null>(null);\n    const { isFocusVisible, focusProps } = useFocusRing();\n    const { pressProps, isPressed } = usePress({ onPress, isDisabled: disabled });\n    const { isHovered, hoverProps } = useHover({ isDisabled: disabled });\n    const getScaleInProps = transitions.useScaleIn();\n    const getScaleProps = transitions.useScale();\n\n    const { name, selectedValue, onChange } = useContext(RadioGroupContext);\n\n    const isChecked =\n      checked ||\n      (Array.isArray(value)\n        ? value.every((i) => i === selectedValue)\n        : selectedValue === value && typeof value !== 'undefined' && value !== null);\n\n    return (\n      <label className={styles.Radio}>\n        <input\n          type=\"radio\"\n          disabled={disabled}\n          aria-disabled={disabled}\n          tabIndex={0}\n          value={value}\n          checked={isChecked}\n          {...mergeProps({ name, onChange }, pressProps, focusProps, hoverProps, otherProps)}\n          ref={composeRefs(inputRef, externalRef)}\n        />\n\n        <span\n          className={clsx([\n            styles.radiomark,\n            styles[`color_${color}`],\n            disabled && styles.disabled,\n            isChecked && styles.checked,\n            isFocusVisible && styles.focusVisible,\n            isPressed && styles.active,\n            isHovered && styles.hover,\n          ])}\n          aria-hidden=\"true\"\n        >\n          <AnimatePresence>\n            {isFocusVisible && (\n              <motion.span aria-hidden=\"true\" className={styles.focusRing} {...getScaleInProps(1.2)} />\n            )}\n          </AnimatePresence>\n\n          <AnimatePresence initial={false}>\n            {isChecked && (\n              <motion.span className={styles.radiomarkIcon} {...getScaleProps(0.7)} key={0}>\n                <span />\n              </motion.span>\n            )}\n          </AnimatePresence>\n        </span>\n\n        {label && (\n          <>\n            <Spacer size={8} inline />\n            <span>{label}</span>\n          </>\n        )}\n      </label>\n    );\n  },\n);\n"],"names":["styles"],"mappings":"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"}