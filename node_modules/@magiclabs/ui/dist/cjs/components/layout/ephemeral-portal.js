'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');
var ReactDOM = require('react-dom');
var useId = require('../../hooks/use-id.js');
var useIsomorphicLayoutEffect = require('../../hooks/use-isomorphic-layout-effect.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var ReactDOM__default = /*#__PURE__*/_interopDefaultLegacy(ReactDOM);

const EphemeralPortal = (props) => {
    const { children, className = '', style = {}, root } = props;
    const portalID = useId.useID();
    const [portalElement, setPortalElement] = React.useState(null);
    // Setup/teardown the tooltip context
    useIsomorphicLayoutEffect.useIsomorphicLayoutEffect(() => {
        const container = document.createElement('div');
        container.dataset.mgEphemeralPortal = portalID;
        container.className = className;
        for (const cssProperty of Object.keys(style)) {
            // @ts-ignore
            container.style[property] = style[property];
        }
        (root || document.body).appendChild(container);
        setPortalElement(container);
        return () => container.remove();
    }, [root, className, JSON.stringify(style)]);
    return portalElement ? React__default["default"].createElement(React__default["default"].Fragment, null, ReactDOM__default["default"].createPortal(children, portalElement)) : null;
};

exports.EphemeralPortal = EphemeralPortal;
//# sourceMappingURL=ephemeral-portal.js.map
