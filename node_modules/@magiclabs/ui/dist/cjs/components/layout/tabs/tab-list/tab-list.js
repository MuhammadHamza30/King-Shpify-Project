'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var framerMotion = require('framer-motion');
var React = require('react');
var reactAria = require('react-aria');
var transitions = require('../../../../hooks/transitions.js');
var useStyles = require('../../../../hooks/use-styles.js');
var clsx = require('clsx');
var flexbox = require('../../flexbox/flexbox.js');
var tabList = require('./tab-list.less.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var clsx__default = /*#__PURE__*/_interopDefaultLegacy(clsx);

const TabList = (props) => {
    const { label, orientation, indicatorAttributes, useAnimation, children } = props;
    const [isFocused, setFocus] = React.useState(false);
    const { focusWithinProps } = reactAria.useFocusWithin({ onFocusWithinChange: setFocus });
    const { isFocusVisible } = reactAria.useFocusVisible();
    const getFadeProps = transitions.transitions.useFade();
    const getScaleProps = transitions.transitions.useScaleIn();
    const focusRingAnimationProps = orientation === 'vertical' ? getScaleProps(1.1) : getFadeProps();
    const horizontalTabStyle = useStyles.useStyles({
        width: `calc(${100 / React.Children.count(children)}% - 3px)`,
        left: `${Math.max(indicatorAttributes.offsetLeft, 4)}px`,
    });
    const verticalTabStyle = useStyles.useStyles({
        height: `${indicatorAttributes.height}px`,
        top: `${indicatorAttributes.offsetTop}px`,
    });
    const verticalFocusRingStyle = useStyles.useStyles({
        height: `calc(${verticalTabStyle.height} + 4px)`,
        top: `calc(${verticalTabStyle.top} - 4px)`,
    });
    return (React__default["default"].createElement(flexbox.Flex, Object.assign({ inline: true, className: clsx__default["default"]([tabList["default"].TabList, tabList["default"][orientation]]), direction: orientation === 'vertical' ? 'column' : 'row', alignItems: orientation === 'vertical' ? undefined : 'center', justifyContent: orientation === 'vertical' ? 'center' : undefined, role: "tablist", "aria-label": label }, focusWithinProps),
        React__default["default"].createElement(framerMotion.AnimatePresence, null, isFocused && isFocusVisible && (React__default["default"].createElement(framerMotion.motion.span, Object.assign({ "aria-hidden": "true", className: tabList["default"].focusRing }, focusRingAnimationProps, { transition: { duration: 0.3 }, style: orientation === 'vertical' ? verticalFocusRingStyle : undefined })))),
        React__default["default"].createElement("div", { "aria-hidden": "true", className: clsx__default["default"]([tabList["default"].selectedTabIndicator, useAnimation && tabList["default"].withAnimation]), style: orientation === 'vertical' ? verticalTabStyle : horizontalTabStyle }),
        children));
};

exports.TabList = TabList;
//# sourceMappingURL=tab-list.js.map
