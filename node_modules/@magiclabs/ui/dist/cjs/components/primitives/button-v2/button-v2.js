'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _tslib = require('../../../_virtual/_tslib.js');
var React = require('react');
var reactAria = require('react-aria');
var framerMotion = require('framer-motion');
var mergeProps = require('../../../libs/merge-props.js');
var clsx = require('clsx');
var iconBase = require('../../icons/icon-base.js');
require('@seznam/compose-react-refs');
var transitions = require('../../../hooks/transitions.js');
require('@react-aria/ssr');
var inverseThemeSemantics = require('../../theme-provider/inverse-theme-semantics.js');
require('@artsy/fresnel');
require('../../theme-provider/theme-provider.js');
require('../../theme-provider/theme-head.js');
var useTheme = require('../../theme-provider/use-theme.js');
require('usable-react');
require('watch-resize');
require('react-dom');
require('react-popper');
var spacer = require('../../layout/spacer.js');
var genericForwardRefs = require('../../../libs/generic-forward-refs.js');
var buttonV2 = require('./button-v2.less.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var clsx__default = /*#__PURE__*/_interopDefaultLegacy(clsx);

/**
 * Determines a _default_ color for icons nested in a `<ButtonV2>`.
 */
function useIconColor(baseColor, inverseSemantics, isHovered, isPressed) {
    const theme = useTheme.useTheme({ inverseSemantics });
    return React.useMemo(() => {
        let iconBaseColor;
        switch (baseColor) {
            case 'v2secondary':
            case 'v2tertiary':
                iconBaseColor = 'primary';
                break;
            case 'neutral':
                iconBaseColor = 'dark';
                break;
            case 'primary':
            case 'negative':
                iconBaseColor = 'light';
                break;
            default:
                iconBaseColor = undefined;
        }
        return iconBaseColor ? theme.hex[iconBaseColor].base : undefined;
    }, [theme.key, baseColor]);
}
const createButtonV2Components = /* @__PURE__ */ genericForwardRefs.createGenericForwardRefsFactory(['button', 'a']);
const ButtonV2Components = /* @__PURE__ */ createButtonV2Components('ButtonV2', { color: 'primary', size: 'md' }, (props, externalRef) => {
    const { onPress, className, disabled, validating, size, color, leadingIcon, trailingIcon, children, component } = props, otherProps = _tslib.__rest(props, ["onPress", "className", "disabled", "validating", "size", "color", "leadingIcon", "trailingIcon", "children", "component"]);
    const { isFocusVisible, focusProps } = reactAria.useFocusRing();
    const { isHovered, hoverProps } = reactAria.useHover({ isDisabled: disabled });
    const { isPressed, pressProps } = reactAria.usePress({ onPress, isDisabled: disabled });
    const getScaleProps = transitions.transitions.useScaleIn();
    const inverseSemantics = false;
    const iconColor = useIconColor(color, inverseSemantics);
    const content = (React__default["default"].createElement(React__default["default"].Fragment, null,
        React__default["default"].createElement(framerMotion.AnimatePresence, null, isFocusVisible && React__default["default"].createElement(framerMotion.motion.span, Object.assign({ "aria-hidden": "true", className: buttonV2["default"].focusRing }, getScaleProps(1.08)))),
        leadingIcon && (React__default["default"].createElement(React__default["default"].Fragment, null,
            React__default["default"].createElement(iconBase.Icon, { size: size === 'sm' ? 16 : 24, type: leadingIcon }),
            React__default["default"].createElement(spacer.Spacer, { size: 8 }))),
        React__default["default"].createElement("span", { className: buttonV2["default"].buttonLabel }, children),
        trailingIcon && (React__default["default"].createElement(React__default["default"].Fragment, null,
            React__default["default"].createElement(spacer.Spacer, { size: 8 }),
            React__default["default"].createElement(iconBase.Icon, { size: size === 'sm' ? 16 : 24, type: trailingIcon })))));
    return (React__default["default"].createElement(iconBase.IconColorProvider, { colorA: iconColor },
        React__default["default"].createElement(inverseThemeSemantics.InverseThemeSemantics, { active: inverseSemantics }, React__default["default"].createElement(component, Object.assign(Object.assign({ className: clsx__default["default"]([
                className,
                buttonV2["default"].Button,
                buttonV2["default"][size],
                buttonV2["default"][`size_${size}`],
                buttonV2["default"][`color_${color}`],
                disabled && buttonV2["default"].disabled,
                validating && buttonV2["default"].validating,
                isPressed && buttonV2["default"].active,
            ]), disabled, 'aria-disabled': disabled }, mergeProps.mergeProps(pressProps, focusProps, hoverProps, otherProps)), { ref: externalRef }), content))));
});
const ButtonV2 = /* @__PURE__ */ Object.assign(ButtonV2Components.button, ButtonV2Components);

exports.ButtonV2 = ButtonV2;
//# sourceMappingURL=button-v2.js.map
